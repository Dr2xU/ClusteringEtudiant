# Clustering of Students

A Flask web application for managing elections where teachers can create elections, students vote to form groups, and results are clustered intelligently. Admins manage users and oversee the system.

---

## Table of Contents

- Features  
- Project Structure  
- Setup and Installation  
- Usage  
- Testing  
- API Integration  
- Contributing  
- License

---

## Features

- **User Roles:** Admin, Teacher, Student with role-based dashboards and permissions  
- **User Management:** Admin can add teachers and students with autogenerated IDs and emails  
- **Elections:** Teachers create elections, set voting and grouping parameters  
- **Voting System:** Students vote by ranking peers, can modify votes until election ends  
- **Clustering Algorithm:** Automatically groups students based on voting preferences  
- **Group Names:** Dynamically generated group names via OpenAI API based on member initials  
- **Results:** Students and teachers can view final groups after clustering  
- **Authentication:** Secure login system per role with session management  
- **Database:** SQLAlchemy ORM with SQLite backend (easily replaceable)  
- **Testing:** Unit tests covering models, services, clustering, and routes

---

## Project Structure

clustering_students/
├── app/
│ ├── blueprints/
│ │ ├── auth/
│ │ ├── admin/
│ │ ├── teacher/
│ │ ├── student/
│ ├── dao/
│ ├── models/
│ ├── services/
│ │ ├── openai_service.py
│ │ ├── admin_service.py
│ │ ├── teacher_service.py
│ │ └── ...
│ ├── static/
│ │ └── style.css
│ ├── templates/
│ │ ├── auth/
│ │ ├── admin/
│ │ ├── teacher/
│ │ ├── student/
│ │ └── base.html
│ ├── init.py
│ ├── config.py
│ ├── extensions.py
│ └── ...
├── tests/
│ ├── test_models.py
│ ├── test_services.py
│ ├── test_routes.py
│ └── test_clustering.py
├── .env
├── requirements.txt
├── run.py
└── README.md

---

## Setup and Installation

### Requirements

- Python 3.8+  
- `pip` package manager  
- OpenAI API key (for group name generation)

### Installation Steps

1. **Clone the repository**

```bash
git clone https://github.com/Dr2xU/ClusteringEtudiant.git>
cd clustering_students
```

2. **Create and activate a virtual environment**

```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Unix / MacOS
source venv/bin/activate
```

3. **Install dependencies**

```bash
pip install -r requirements.txt
```

4. **Set environment variables**

Create a .env file with:

```ini
FLASK_APP=run.py
FLASK_ENV=development
OPENAI_API_KEY=your_openai_api_key_here
SECRET_KEY=your_secret_key_here
```

5. **Initialize the database**

The app automatically creates tables on first run.

6. **Run the app**

```bash
python run.py
Access at: http://127.0.0.1:5000
```

---

## Usage

- Visit /auth/login to log in.

- Initially, create an Admin user manually via Python shell:

```python
from app import create_app
from app.extensions import db
from app.services.admin_service import create_admin

app = create_app()
app.app_context().push()

create_admin("admin@jwc.com", "admin123", "Alice", "Admin")
```

- Log in as Admin, add teachers and students.

- Teachers create elections, students vote.

- Clustering results can be generated and viewed.

---

## Testing

Run unit tests with `pytest`:

```bash
pytest
```

Tests cover:

- Model integrity

- Service layer logic

- Route access and authentication

- Clustering algorithm correctness

---

## API Integration

Uses OpenAI API for generating group names:

- Function: generate_group_name_from_initials(first_names)

- Requires OPENAI_API_KEY environment variable

- Uses OpenAI text-davinci-003 model for creative naming

---
